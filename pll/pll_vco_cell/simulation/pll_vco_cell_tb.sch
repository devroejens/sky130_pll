v {xschem version=2.9.9 file_version=1.2 }
G {}
K {}
V {}
S {}
E {}
N 40 -80 40 -40 { lab=gnd}
N 40 -400 40 -340 { lab=vdd}
N 740 -700 740 -640 { lab=vdd}
N 740 -580 740 -540 { lab=ibias}
N 340 -80 340 -40 { lab=vss}
N 340 -280 340 -240 { lab=vtune}
N 1140 -620 1140 -560 { lab=vdd}
N 1140 -400 1140 -360 { lab=vss}
N 40 -180 40 -140 { lab=vdd_0}
N 860 -700 860 -660 { lab=vss}
N 1120 -620 1120 -560 { lab=vtune_buf}
N 980 -700 980 -660 { lab=vss}
N 740 -540 740 -500 { lab=ibias}
N 740 -540 800 -540 { lab=ibias}
N 800 -540 800 -470 { lab=ibias}
N 780 -470 800 -470 { lab=ibias}
N 740 -440 740 -400 { lab=vss}
N 1120 -400 1120 -380 { lab=ibias}
N 800 -380 1120 -380 { lab=ibias}
N 800 -470 800 -380 { lab=ibias}
N 720 -470 740 -470 { lab=vss}
N 720 -470 720 -440 { lab=vss}
N 720 -440 740 -440 { lab=vss}
N 1360 -620 1360 -560 { lab=vdd}
N 1360 -400 1360 -360 { lab=vss}
N 1340 -620 1340 -560 { lab=vtune_buf}
N 1340 -400 1340 -380 { lab=ibias}
N 1120 -380 1340 -380 { lab=ibias}
N 1580 -620 1580 -560 { lab=vdd}
N 1580 -400 1580 -360 { lab=vss}
N 1560 -620 1560 -560 { lab=vtune_buf}
N 1560 -400 1560 -380 { lab=ibias}
N 1420 -460 1500 -460 { lab=phi[5]}
N 1420 -500 1500 -500 { lab=phi[1]}
N 1800 -620 1800 -560 { lab=vdd}
N 1800 -400 1800 -360 { lab=vss}
N 1780 -620 1780 -560 { lab=vtune_buf}
N 1780 -400 1780 -380 { lab=ibias}
N 1640 -460 1720 -460 { lab=phi[6]}
N 1640 -500 1720 -500 { lab=phi[2]}
N 1340 -380 1780 -380 { lab=ibias}
N 1030 -500 1030 -330 { lab=phi[7]}
N 1030 -330 1940 -330 { lab=phi[7]}
N 1940 -460 1940 -330 { lab=phi[7]}
N 1050 -660 1050 -460 { lab=phi[3]}
N 1050 -660 1940 -660 { lab=phi[3]}
N 1940 -660 1940 -500 { lab=phi[3]}
N 860 -820 860 -760 { lab=in_p}
N 980 -820 980 -760 { lab=in_n}
N 1200 -500 1280 -500 { lab=phi[0]}
N 1200 -460 1280 -460 { lab=phi[4]}
N 1760 -400 1760 -390 { lab=sdn}
N 1540 -400 1540 -390 { lab=sdn}
N 1320 -400 1320 -390 { lab=sdn}
N 1100 -400 1100 -390 { lab=sdn}
N 1100 -390 1760 -390 { lab=sdn}
N 1100 -390 1100 -360 { lab=sdn}
N 460 -80 460 -40 { lab=vss}
N 460 -180 460 -140 { lab=sdn}
N 1860 -500 1940 -500 { lab=phi[3]}
N 1860 -460 1940 -460 { lab=phi[7]}
N 1290 -260 1350 -260 { lab=#net1}
N 1430 -260 1490 -260 { lab=#net2}
N 1150 -260 1210 -260 { lab=phi[0:7]}
N 1570 -260 1630 -260 { lab=out[0:7]}
N 1750 -140 1750 -100 { lab=vss}
N 1750 -260 1750 -200 { lab=out[0:7]}
N 160 -400 160 -340 { lab=vss}
N 160 -180 160 -40 { lab=gnd}
N 40 -280 40 -240 { lab=vdd_1}
N 160 -280 160 -240 { lab=vss_1}
N 1050 -460 1060 -460 { lab=phi[3]}
N 1030 -500 1060 -500 { lab=phi[7]}
N 1860 -140 1860 -100 { lab=vss}
N 1860 -260 1860 -200 { lab=vss}
N 340 -180 340 -140 { lab=vtune_dc}
N 970 -80 970 -40 { lab=vss}
N 1060 -80 1060 -40 { lab=vss}
N 970 -180 970 -140 { lab=#net3}
N 970 -180 1060 -180 { lab=#net3}
N 1060 -180 1060 -140 { lab=#net3}
N 1370 -80 1370 -40 { lab=vss}
N 1460 -80 1460 -40 { lab=vss}
N 1370 -180 1370 -140 { lab=#net4}
N 1370 -180 1460 -180 { lab=#net4}
N 1460 -180 1460 -140 { lab=#net4}
N 560 -480 620 -480 { lab=vtune_buf}
N 360 -500 400 -500 { lab=vtune}
N 380 -460 400 -460 { lab=vtune_buf}
N 460 -590 460 -560 { lab=sdn}
N 460 -400 460 -370 { lab=ib_buf}
N 740 -80 740 -40 { lab=vss}
N 740 -180 740 -140 { lab=ib_buf}
N 480 -590 480 -560 { lab=vdd}
N 480 -400 480 -370 { lab=vss}
N 600 -480 600 -350 { lab=vtune_buf}
N 380 -460 380 -350 { lab=vtune_buf}
N 380 -350 600 -350 { lab=vtune_buf}
N 640 -390 640 -350 { lab=vss}
N 620 -480 640 -480 { lab=vtune_buf}
N 640 -480 640 -450 { lab=vtune_buf}
C {devices/code.sym} 10 -810 0 0 {name=SIM only_toplevel=false value="

*.option savecurrents
*.option rshunt = 1e12
*.option gmin = 1e-24

** Settings for PSS osciallator
*.option reltol=1e-5
*.option vntol=3e-8
*.option abstol=1e-13
**.option chgtol=1e-12
*.option trtol=10
.option method=gear



* Set Oscillator nodes to initial conditions to start oscilation
*.ic v(\\"phi<0>\\")=1.8 v(\\"phi<4>\\")=0.0 v(\\"phi<1>\\")=0.0 v(\\"phi<5>\\")=1.8

.control

* #################################################################
* #
* #                         OPERATING POINT
* #
* #################################################################
reset
save all

* Bias transistor OP params
save i(@m.xm1.msky130_fd_pr__nfet_01v8[id])
save @m.xm1.msky130_fd_pr__nfet_01v8[gm]
save v(@m.xm1.msky130_fd_pr__nfet_01v8[vds])
save v(@m.xm1.msky130_fd_pr__nfet_01v8[vgs])
save v(@m.xm1.msky130_fd_pr__nfet_01v8[vth])
save v(@m.xm1.msky130_fd_pr__nfet_01v8[vdsat])

* VCO cell OP params
save i(@m.x1.xm1.msky130_fd_pr__nfet_01v8[id])
save @m.x1.xm1.msky130_fd_pr__nfet_01v8[gm]
save v(@m.x1.xm1.msky130_fd_pr__nfet_01v8[vds])
save v(@m.x1.xm1.msky130_fd_pr__nfet_01v8[vgs])
save v(@m.x1.xm1.msky130_fd_pr__nfet_01v8[vth])
save v(@m.x1.xm1.msky130_fd_pr__nfet_01v8[vdsat])

save i(@m.x1.xm2.msky130_fd_pr__nfet_01v8[id])
save @m.x1.xm2.msky130_fd_pr__nfet_01v8[gm]
save v(@m.x1.xm2.msky130_fd_pr__nfet_01v8[vds])
save v(@m.x1.xm2.msky130_fd_pr__nfet_01v8[vgs])
save v(@m.x1.xm2.msky130_fd_pr__nfet_01v8[vth])
save v(@m.x1.xm2.msky130_fd_pr__nfet_01v8[vdsat])

save i(@m.x1.xm3.msky130_fd_pr__nfet_01v8[id])
save @m.x1.xm3.msky130_fd_pr__nfet_01v8[gm]
save v(@m.x1.xm3.msky130_fd_pr__nfet_01v8[vds])
save v(@m.x1.xm3.msky130_fd_pr__nfet_01v8[vgs])
save v(@m.x1.xm3.msky130_fd_pr__nfet_01v8[vth])
save v(@m.x1.xm3.msky130_fd_pr__nfet_01v8[vdsat])

save i(@m.x1.xm4.msky130_fd_pr__pfet_01v8[id])
save @m.x1.xm4.msky130_fd_pr__pfet_01v8[gm]
save v(@m.x1.xm4.msky130_fd_pr__pfet_01v8[vds])
save v(@m.x1.xm4.msky130_fd_pr__pfet_01v8[vgs])
save v(@m.x1.xm4.msky130_fd_pr__pfet_01v8[vth])
save v(@m.x1.xm4.msky130_fd_pr__pfet_01v8[vdsat])

save i(@m.x1.xm5.msky130_fd_pr__pfet_01v8[id])
save @m.x1.xm5.msky130_fd_pr__pfet_01v8[gm]
save v(@m.x1.xm5.msky130_fd_pr__pfet_01v8[vds])
save v(@m.x1.xm5.msky130_fd_pr__pfet_01v8[vgs])
save v(@m.x1.xm5.msky130_fd_pr__pfet_01v8[vth])
save v(@m.x1.xm5.msky130_fd_pr__pfet_01v8[vdsat])

save i(@m.x1.xm6.msky130_fd_pr__pfet_01v8[id])
save @m.x1.xm6.msky130_fd_pr__pfet_01v8[gm]
save v(@m.x1.xm6.msky130_fd_pr__pfet_01v8[vds])
save v(@m.x1.xm6.msky130_fd_pr__pfet_01v8[vgs])
save v(@m.x1.xm6.msky130_fd_pr__pfet_01v8[vth])
save v(@m.x1.xm6.msky130_fd_pr__pfet_01v8[vdsat])

save i(@m.x1.xm7.msky130_fd_pr__pfet_01v8[id])
save @m.x1.xm7.msky130_fd_pr__pfet_01v8[gm]
save v(@m.x1.xm7.msky130_fd_pr__pfet_01v8[vds])
save v(@m.x1.xm7.msky130_fd_pr__pfet_01v8[vgs])
save v(@m.x1.xm7.msky130_fd_pr__pfet_01v8[vth])
save v(@m.x1.xm7.msky130_fd_pr__pfet_01v8[vdsat])


op
set filetype=binary
write pll_vco_cell_tb.raw all

* #################################################################
* #
* #                 TRANSIENT OSCILATION REGIME
* #
* #################################################################
reset
setplot const
save all
save v(in_p)
save v(in_n)
save v(vtune)
save v(vtune_buf)
save v(vsdn)

*ic v(\\"phi<0>\\")=1.8 v(\\"phi<4>\\")=0 v(\\"phi<1>\\")=0 v(\\"phi<5>\\")=1.8
tran 0.005n 500n uic
set filetype=ascii
write pll_vco_cell_tb_tran.raw v(vtune) v(vtune_buf) v(\\"out<3>\\") v(\\"out<7>\\") v(\\"phi<3>\\") v(\\"phi<7>\\")

* Plot internal nodes
*plot v(\\"phi<0>\\") v(\\"phi<4>\\")
*plot v(\\"phi<1>\\") v(\\"phi<5>\\")

* Plot outputs
plot v(\\"out<0>\\")+2 v(\\"out<4>\\")+2 v(\\"out<1>\\")+0 v(\\"out<5>\\")+0 v(\\"out<2>\\")-2 v(\\"out<6>\\")-2 v(\\"out<3>\\")-4 v(\\"out<7>\\")-4
plot v(\\"phi<0>\\")+2 v(\\"phi<4>\\")+2 v(\\"phi<1>\\")+0 v(\\"phi<5>\\")+0 v(\\"phi<2>\\")-2 v(\\"phi<6>\\")-2 v(\\"phi<3>\\")-4 v(\\"phi<7>\\")-4

*plot v(\\"out<0>\\") v(\\"out<4>\\")
*plot v(\\"out<1>\\") v(\\"out<5>\\")
*plot v(\\"out<2>\\") v(\\"out<6>\\") 
*plot v(\\"out<3>\\") v(\\"out<7>\\")


* #################################################################
* #
* #                 TRANSIENT OSCILATION REGIME
* #
* #################################################################

let run_pss = 0
if run_pss > 0
	echo #############################################################
	echo Initial PSS run
	echo #############################################################

	reset
	setplot const
	save all

	*ic v(\\"phi<0>\\")=1.8 v(\\"phi<4>\\")=0 v(\\"phi<1>\\")=0 v(\\"phi<5>\\")=1.8
	pss 250e6 40n \\"out<7>\\" 128 10 3 100e-3 uic

	set filetype=ascii
	write pll_vco_cell_tb_pss.raw all
end

let run_pss_sweep = 0
if run_pss_sweep > 0
	echo #############################################################
	echo Sweep PSS run
	echo #############################################################

	reset
	setplot const
	save all

	let run = 0
	let vtune_start = 0.0
	let vtune_stop = 1.8
	let vtune_step = 0.01
	let vtune_val = vtune_start
	let vtune_length = (vtune_stop-vtune_start)/vtune_step

	set curplot = new
	set pss_sweep_plot = $curplot

	let fout = vector(vtune_length)
	let vtune_sweep = vector(vtune_length)

	while vtune_val le vtune_stop
		* Print run variables
		set run = "$&run"
		set run_total = "$&vtune_length"
		set vtune_val = "$&vtune_val"
		echo #############################################################
		echo PSS run: $run / $run_total for vtune: $vtune_val V
		echo #############################################################

		* Run Transient
		echo START TRAN
		set dt = $curplot
		reset

		* Set sweep variable
		alter Vtune = vtune_val
		echo 0: $vtune_val

		save vtune \\"v(out<7>)\\" \\"v(out<3>)\\"
		tran 0.005n 60n uic
		set filetype=ascii
		set tranfilename =  \{pll_vco_cell_tb_tran_sweep_\}\{$&run\}\{.raw\}
		echo $tranfilename
		write $tranfilename vtune \\"out<7>\\" \\"out<3>\\"
		echo END TRAN
		setplot $dt

		* Execute analysis + set plot environment
		echo START PSS
		reset

		* Set sweep variable
		alter Vtune = vtune_val
		echo Vtune DC: $vtune_val

		save vtune \\"v(out<7>)\\" \\"v(out<3>)\\"
		pss 200e6 40n \\"out<7>\\" 128 10 3 100e-3 uic
		set dt = $curplot
		setplot $pss_sweep_plot
		
		
		* Save values to variable
		let vtune_sweep[$run] = vtune_val
		let fout[$run] = \{$dt\}.frequency[1]

		let fosc=fout[$run]/1e6
		set fosc = "$&fosc"
		echo Measured Fosc: $fosc MHz
		
		echo END PSS
		setplot $dt

		let vtune_val = vtune_val + vtune_step
		let run = run + 1

	end
	*plot v(\{$pss_sweep_plot\}.all)
	plot fout vs vtune_sweep

	setplot $pss_sweep_plot
	set filetype=ascii
	write pll_vco_cell_tb_pss_sweep.raw all
end

* #################################################################
* #
* #                 AC RESPONSE SIMULATED IN TRANSIENT
* #
* #################################################################

let run_tran_ac_sweep = 0
if run_tran_ac_sweep > 0
	echo #############################################################
	echo Sweep TRAN AC run
	echo #############################################################

	reset
	setplot const
	save all


	* Setup sweep values
	let vtune_freq_start = 100meg
	let vtune_freq_stop = 10000meg
	let vtune_freq_step = 100
	compose vtune_freq_vect dec=$&vtune_freq_step start=$&vtune_freq_start stop=$&vtune_freq_stop
	let vtune_freq_val = vtune_freq_vect[0]

	* Write frequency vector to file
	set filetype=ascii
	write pll_vco_cell_tb_tran_ac_sweep_input.raw vtune_freq_vect

	* Counter Values
	let run = 0
	let vtune_freq_length = 0
	foreach vtune_freq_val $&vtune_freq_vect
		let vtune_freq_length = vtune_freq_length + 1
	end

	* Setup Plot environment
	set curplot = new
	set tran_ac_sweep_plot = $curplot

	*let fout = vector(vtune_freq_length)
	*let vtune_freq_sweep = vector(vtune_freq_length)

	foreach vtune_freq_val $&vtune_freq_vect
		* Print run variables
		set run = "$&run"
		set run_total = "$&vtune_freq_length"
		echo #############################################################
		echo TRAN AC run: $run / $run_total for vtune: $vtune_freq_val Hz
		echo #############################################################

		* Run Transient
		echo START TRAN
		set dt = $curplot

		* Set sweep variable
		alterparam vtune_freq = $vtune_freq_val
		echo Vtune Frequency: $vtune_freq_val

		* Run
		reset
		save vtune vtune_buf \\"v(out<7>)\\" \\"v(out<3>)\\"
		tran 0.005n 520n uic
		set filetype=ascii
		set tranfilename =  \{pll_vco_cell_tb_tran_ac_sweep_\}\{$&run\}\{.raw\}
		echo $tranfilename
		write $tranfilename vtune \\"out<7>\\" \\"out<3>\\"
		echo END TRAN
		setplot $dt
		
		let run = run + 1
	end

	*setplot $pss_sweep_plot
	*set filetype=ascii
	*write pll_vco_cell_tb_pss_sweep.raw all
end


*rusage
.endc
"}
C {devices/code.sym} 150 -810 0 0 {name=TT_MODELS
only_toplevel=true
format="tcleval( @value )"
value="
.options wnflag=1
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_01v8/sky130_fd_pr__nfet_01v8__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_01v8_lvt/sky130_fd_pr__nfet_01v8_lvt__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_01v8/sky130_fd_pr__pfet_01v8__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_03v3_nvt/sky130_fd_pr__nfet_03v3_nvt__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_05v0_nvt/sky130_fd_pr__nfet_05v0_nvt__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/esd_nfet_01v8/sky130_fd_pr__esd_nfet_01v8__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_01v8_lvt/sky130_fd_pr__pfet_01v8_lvt__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_01v8_hvt/sky130_fd_pr__pfet_01v8_hvt__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/esd_pfet_g5v0d10v5/sky130_fd_pr__esd_pfet_g5v0d10v5__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_g5v0d10v5/sky130_fd_pr__pfet_g5v0d10v5__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_g5v0d16v0/sky130_fd_pr__pfet_g5v0d16v0__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_g5v0d10v5/sky130_fd_pr__nfet_g5v0d10v5__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_g5v0d16v0/sky130_fd_pr__nfet_g5v0d16v0__tt_discrete.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/esd_nfet_g5v0d10v5/sky130_fd_pr__esd_nfet_g5v0d10v5__tt.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/models/corners/tt/nonfet.spice

.include \\\\$::SKYWATER_MODELS\\\\/cells/cap_var_hvt/sky130_fd_pr__cap_var_hvt.model.spice

* Mismatch parameters
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_01v8/sky130_fd_pr__nfet_01v8__mismatch.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_01v8/sky130_fd_pr__pfet_01v8__mismatch.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_01v8_lvt/sky130_fd_pr__nfet_01v8_lvt__mismatch.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_01v8_lvt/sky130_fd_pr__pfet_01v8_lvt__mismatch.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_01v8_hvt/sky130_fd_pr__pfet_01v8_hvt__mismatch.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_g5v0d10v5/sky130_fd_pr__nfet_g5v0d10v5__mismatch.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/pfet_g5v0d10v5/sky130_fd_pr__pfet_g5v0d10v5__mismatch.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_05v0_nvt/sky130_fd_pr__nfet_05v0_nvt__mismatch.corner.spice
.include \\\\$::SKYWATER_MODELS\\\\/cells/nfet_03v3_nvt/sky130_fd_pr__nfet_03v3_nvt__mismatch.corner.spice

* Resistor\\\\$::SKYWATER_MODELS\\\\/Capacitor
.include \\\\$::SKYWATER_MODELS\\\\/models/r+c/res_typical__cap_typical.spice
.include \\\\$::SKYWATER_MODELS\\\\/models/r+c/res_typical__cap_typical__lin.spice

* Special cells
.include \\\\$::SKYWATER_MODELS\\\\/models/corners/tt/specialized_cells.spice

* All models
.include \\\\$::SKYWATER_MODELS\\\\/models/all.spice

* Corner
.include \\\\$::SKYWATER_MODELS\\\\/models/corners/tt/rf.spice
"}
C {devices/launcher.sym} 80 -520 0 0 {name=h1
descr=Annotate
tclcommand="ngspice::annotate"}
C {devices/launcher.sym} 80 -480 0 0 {name=h2
descr="View Raw" 
tclcommand="textwindow $netlist_dir/test_nmos.raw"}
C {devices/vsource.sym} 40 -110 0 0 {name=V1 value=1.8}
C {devices/gnd.sym} 160 -40 0 0 {name=l1 lab=gnd}
C {lab_wire.sym} 40 -390 3 0 {name=l2 sig_type=std_logic lab=vdd
}
C {lab_wire.sym} 40 -80 3 0 {name=l3 sig_type=std_logic lab=gnd}
C {devices/isource.sym} 740 -610 0 0 {name=I0 value=48u}
C {lab_wire.sym} 740 -690 3 0 {name=l23 sig_type=std_logic lab=vdd
}
C {lab_wire.sym} 740 -580 3 0 {name=l24 sig_type=std_logic lab=ibias}
C {devices/ammeter.sym} 40 -210 0 0 {name=Vmeas_vdd current=-0.003316}
C {devices/ngspice_probe.sym} 740 -540 0 0 {name=r7}
C {devices/vsource.sym} 340 -110 0 0 {name=Vtune value=0.9}
C {devices/ngspice_probe.sym} 340 -240 0 0 {name=r1}
C {lab_wire.sym} 340 -280 3 0 {name=l5 sig_type=std_logic lab=vtune}
C {lab_wire.sym} 1140 -610 3 0 {name=l6 sig_type=std_logic lab=vdd
}
C {lab_wire.sym} 40 -180 3 0 {name=l10 sig_type=std_logic lab=vdd_0
}
C {devices/ngspice_probe.sym} 1140 -560 0 0 {name=r2}
C {devices/vsource.sym} 860 -730 0 0 {name=V2 value="dc 0 pulse 0 1.8 1n 0.1n 0.1n 2n 3600"}
C {lab_wire.sym} 1120 -610 3 0 {name=l9 sig_type=std_logic lab=vtune_buf}
C {devices/vsource.sym} 980 -730 0 0 {name=V3 value="dc 0 pulse 1.8 0 1n 0.1n 0.1n 2n 3600"}
C {sky130_fd_pr/nfet_01v8.sym} 760 -470 0 1 {name=M1
L=0.3
W=10
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 860 -820 3 0 {name=l14 sig_type=std_logic lab=in_p
}
C {lab_wire.sym} 980 -820 3 0 {name=l15 sig_type=std_logic lab=in_n
}
C {lab_wire.sym} 1360 -610 3 0 {name=l16 sig_type=std_logic lab=vdd
}
C {devices/ngspice_probe.sym} 1360 -560 0 0 {name=r3}
C {lab_wire.sym} 1340 -610 3 0 {name=l18 sig_type=std_logic lab=vtune_buf}
C {lab_wire.sym} 1250 -500 0 0 {name=l19 sig_type=std_logic lab=phi[0]}
C {lab_wire.sym} 1250 -460 0 0 {name=l20 sig_type=std_logic lab=phi[4]}
C {lab_wire.sym} 1580 -610 3 0 {name=l21 sig_type=std_logic lab=vdd
}
C {devices/ngspice_probe.sym} 1580 -560 0 0 {name=r4}
C {lab_wire.sym} 1560 -610 3 0 {name=l25 sig_type=std_logic lab=vtune_buf}
C {lab_wire.sym} 1470 -500 0 0 {name=l26 sig_type=std_logic lab=phi[1]}
C {lab_wire.sym} 1470 -460 0 0 {name=l27 sig_type=std_logic lab=phi[5]}
C {lab_wire.sym} 1800 -610 3 0 {name=l28 sig_type=std_logic lab=vdd
}
C {devices/ngspice_probe.sym} 1800 -560 0 0 {name=r5}
C {lab_wire.sym} 1780 -610 3 0 {name=l30 sig_type=std_logic lab=vtune_buf}
C {lab_wire.sym} 1690 -500 0 0 {name=l31 sig_type=std_logic lab=phi[2]}
C {lab_wire.sym} 1690 -460 0 0 {name=l34 sig_type=std_logic lab=phi[6]}
C {lab_wire.sym} 1910 -500 0 0 {name=l35 sig_type=std_logic lab=phi[3]}
C {lab_wire.sym} 1910 -460 0 0 {name=l37 sig_type=std_logic lab=phi[7]}
C {lab_wire.sym} 1100 -400 3 0 {name=l46 sig_type=std_logic lab=sdn}
C {devices/vsource.sym} 460 -110 0 0 {name=Vsdn value=0}
C {devices/ngspice_probe.sym} 460 -140 0 0 {name=r6}
C {lab_wire.sym} 460 -180 3 0 {name=l48 sig_type=std_logic lab=sdn}
C {devices/code.sym} 290 -810 0 0 {name=STDCELLS only_toplevel=false 
format="tcleval(@value )"
value="* .include \\\\$::SKYWATER_STDCELLS\\\\/cells/
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/buf/sky130_fd_sc_hd__buf_1.spice
.include \\\\$::SKYWATER_STDCELLS_HS\\\\/cells/buf/sky130_fd_sc_hs__buf_1.spice
.include \\\\$::SKYWATER_STDCELLS_HS\\\\/cells/buf/sky130_fd_sc_hs__buf_16.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/clkbuf/sky130_fd_sc_hd__clkbuf_1.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/clkbuf/sky130_fd_sc_hd__clkbuf_2.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/clkbuf/sky130_fd_sc_hd__clkbuf_4.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/clkbuf/sky130_fd_sc_hd__clkbuf_8.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/clkbuf/sky130_fd_sc_hd__clkbuf_16.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/decap/sky130_fd_sc_hd__decap_3.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/decap/sky130_fd_sc_hd__decap_4.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/decap/sky130_fd_sc_hd__decap_8.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/dfrbp/sky130_fd_sc_hd__dfrbp_1.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/dfrbp/sky130_fd_sc_hd__dfrbp_2.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/inv/sky130_fd_sc_hd__inv_1.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/inv/sky130_fd_sc_hd__inv_2.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/inv/sky130_fd_sc_hd__inv_4.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/inv/sky130_fd_sc_hd__inv_8.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/inv/sky130_fd_sc_hd__inv_16.spice
.include \\\\$::SKYWATER_STDCELLS_HS\\\\/cells/inv/sky130_fd_sc_hs__inv_1.spice
.include \\\\$::SKYWATER_STDCELLS_HS\\\\/cells/inv/sky130_fd_sc_hs__inv_2.spice
.include \\\\$::SKYWATER_STDCELLS_HS\\\\/cells/inv/sky130_fd_sc_hs__inv_4.spice
.include \\\\$::SKYWATER_STDCELLS_HS\\\\/cells/inv/sky130_fd_sc_hs__inv_8.spice
.include \\\\$::SKYWATER_STDCELLS_HS\\\\/cells/inv/sky130_fd_sc_hs__inv_16.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/mux2/sky130_fd_sc_hd__mux2_2.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/nand2/sky130_fd_sc_hd__nand2_1.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/tap/sky130_fd_sc_hd__tap_2.spice
.include \\\\$::SKYWATER_STDCELLS\\\\/cells/tapvpwrvgnd/sky130_fd_sc_hd__tapvpwrvgnd_1.spice
"}
C {sky130_stdcells/inv_1.sym} 1250 -260 0 0 {name=x5[0:7] VGND=vss VNB=vss VPB=vdd VPWR=vdd prefix=sky130_fd_sc_hs__ }
C {sky130_stdcells/inv_2.sym} 1390 -260 0 0 {name=x6[0:7] VGND=vss VNB=vss VPB=vdd VPWR=vdd prefix=sky130_fd_sc_hs__ }
C {sky130_stdcells/inv_4.sym} 1530 -260 0 0 {name=x7[0:7] VGND=vss VNB=vss VPB=vdd VPWR=vdd prefix=sky130_fd_sc_hs__ }
C {lab_wire.sym} 1630 -260 0 0 {name=l8 sig_type=std_logic lab=out[0:7]}
C {lab_wire.sym} 1210 -260 0 0 {name=l11 sig_type=std_logic lab=phi[0:7]}
C {lab_wire.sym} 340 -80 3 0 {name=l4 sig_type=std_logic lab=vss}
C {lab_wire.sym} 460 -80 3 0 {name=l32 sig_type=std_logic lab=vss}
C {lab_wire.sym} 860 -700 3 0 {name=l12 sig_type=std_logic lab=vss}
C {lab_wire.sym} 980 -700 3 0 {name=l33 sig_type=std_logic lab=vss}
C {lab_wire.sym} 740 -440 3 0 {name=l36 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1140 -400 3 0 {name=l7 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1360 -400 3 0 {name=l13 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1580 -400 3 0 {name=l17 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1800 -400 3 0 {name=l22 sig_type=std_logic lab=vss}
C {lab_wire.sym} 160 -80 3 0 {name=l45 sig_type=std_logic lab=gnd}
C {lab_wire.sym} 160 -390 3 0 {name=l47 sig_type=std_logic lab=vss}
C {devices/capa.sym} 1750 -170 0 0 {name=CL[0:7]
m=1
value=5f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 1750 -140 3 0 {name=l49 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1750 -260 3 0 {name=l50 sig_type=std_logic lab=out[0:7]}
C {devices/ammeter.sym} 160 -210 0 0 {name=Vmeas_vss current=0.003316}
C {devices/res.sym} 40 -310 0 0 {name=Rvdd
value=10m
footprint=1206
device=resistor
m=1}
C {devices/res.sym} 160 -310 0 0 {name=Rvdd1
value=10m
footprint=1206
device=resistor
m=1}
C {lab_wire.sym} 40 -280 3 0 {name=l29 sig_type=std_logic lab=vdd_1
}
C {lab_wire.sym} 160 -280 3 0 {name=l38 sig_type=std_logic lab=vss_1
}
C {devices/ngspice_probe.sym} 1250 -500 0 0 {name=r8}
C {devices/ngspice_probe.sym} 1250 -460 0 0 {name=r9}
C {devices/ngspice_probe.sym} 1470 -500 0 0 {name=r10}
C {devices/ngspice_probe.sym} 1470 -460 0 0 {name=r11}
C {devices/ngspice_probe.sym} 1690 -500 0 0 {name=r12}
C {devices/ngspice_probe.sym} 1690 -460 0 0 {name=r13}
C {devices/ngspice_probe.sym} 1910 -500 0 0 {name=r14}
C {devices/ngspice_probe.sym} 1910 -460 0 0 {name=r15}
C {test_jens/ngspice_get_value_inline2.sym} 810 -480 0 0 {name=r16 descr="Id" node=i(@m.$\{path\}xm1.msky130_fd_pr__nfet_01v8[id])
}
C {test_jens/ngspice_get_value_inline2.sym} 810 -470 0 0 {name=r17 descr="Vds" node=v(@m.$\{path\}xm1.msky130_fd_pr__nfet_01v8[vds])
}
C {test_jens/ngspice_get_value_inline2.sym} 810 -460 0 0 {name=r18 descr="Vgs" node=v(@m.$\{path\}xm1.msky130_fd_pr__nfet_01v8[vgs])
}
C {test_jens/ngspice_get_value_inline2.sym} 810 -450 0 0 {name=r19 descr="Vth" node=v(@m.$\{path\}xm1.msky130_fd_pr__nfet_01v8[vth])
}
C {test_jens/ngspice_get_value_inline2.sym} 810 -440 0 0 {name=r20 descr="Vdsat" node=v(@m.$\{path\}xm1.msky130_fd_pr__nfet_01v8[vdsat])
}
C {devices/capa.sym} 1860 -170 0 0 {name=CL1[0:7]
m=1
value=5f
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 1860 -140 3 0 {name=l53 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1860 -260 3 0 {name=l39 sig_type=std_logic lab=vss}
C {devices/vsource.sym} 340 -210 0 0 {name=VtuneAc value="DC 0"}
C {lab_wire.sym} 340 -180 3 0 {name=l40 sig_type=std_logic lab=vtune_dc}
C {devices/netlist.sym} 400 -240 0 0 {name=s1 value=".param vtune_freq=40meg
*SIN(0 50m vtune_freq 20n 0)
"}
C {devices/res.sym} 970 -110 0 0 {name=Rvdd2
value=10m
footprint=1206
device=resistor
m=1}
C {lab_wire.sym} 970 -80 3 0 {name=l41 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1060 -80 3 0 {name=l42 sig_type=std_logic lab=vss}
C {devices/vsource.sym} 1060 -110 0 0 {name=Vstep value="dc 0 pulse 0 -0.05 270n 10p 10p 250n 3600 0"}
C {devices/res.sym} 1370 -110 0 0 {name=Rvdd3
value=10m
footprint=1206
device=resistor
m=1}
C {lab_wire.sym} 1370 -80 3 0 {name=l43 sig_type=std_logic lab=vss}
C {lab_wire.sym} 1460 -80 3 0 {name=l44 sig_type=std_logic lab=vss}
C {devices/res.sym} 1460 -110 0 0 {name=Rvdd4
value=10m
footprint=1206
device=resistor
m=1}
C {lab_wire.sym} 560 -480 0 1 {name=l51 sig_type=std_logic lab=vtune_buf}
C {lab_wire.sym} 400 -500 0 0 {name=l52 sig_type=std_logic lab=vtune}
C {lab_wire.sym} 480 -560 3 1 {name=l54 sig_type=std_logic lab=vdd
}
C {lab_wire.sym} 480 -400 3 0 {name=l55 sig_type=std_logic lab=vss}
C {lab_wire.sym} 460 -560 3 1 {name=l56 sig_type=std_logic lab=sdn}
C {lab_wire.sym} 460 -400 3 0 {name=l57 sig_type=std_logic lab=ib_buf}
C {devices/isource.sym} 740 -110 0 0 {name=I1 value=25u}
C {lab_wire.sym} 740 -80 3 0 {name=l58 sig_type=std_logic lab=vss}
C {lab_wire.sym} 740 -180 3 0 {name=l59 sig_type=std_logic lab=ib_buf}
C {test_jens/pll/pll_vco/pll_vco_cell.sym} 1120 -480 0 0 {name=x1}
C {test_jens/pll/pll_vco/pll_vco_cell.sym} 1340 -480 0 0 {name=x2}
C {test_jens/pll/pll_vco/pll_vco_cell.sym} 1560 -480 0 0 {name=x3}
C {test_jens/pll/pll_vco/pll_vco_cell.sym} 1780 -480 0 0 {name=x4}
C {test_jens/pll/pll_lf_buf/pll_lf_buf.sym} 480 -480 0 0 {name=x5}
C {devices/ngspice_probe.sym} 560 -480 2 1 {name=r21}
C {devices/capa.sym} 640 -420 0 0 {name=CL2[0:7]
m=1
value=2p
footprint=1206
device="ceramic capacitor"}
C {lab_wire.sym} 640 -390 3 0 {name=l60 sig_type=std_logic lab=vss}
